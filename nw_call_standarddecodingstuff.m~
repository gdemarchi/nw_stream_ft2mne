function mne_decode_results=nw_call_standarddecodingstuff(cfg, ft_preproc_struc)
%

mne_epochs=nw_ftpreproc2mne(ft_preproc_struc);


if ~isfield(cfg, 'method')
    method='logreg_timedecoding';
end

if ~isfield(cfg, 'numcv')
    numcv=4;
else 
    numcv=cfg.numcv;
end

if ~isfield(cfg, 'jobs')
    jobs=1;
else 
    jobs=cfg.jobs;
end

switch method
    case 'logreg_timedecoding'
        mne_decode_results =py.nw_standarddecodingstuff.logreg_timedecoding(mne_epochs, pyargs('numcv',py.int(numcv),'jobs',py.int(jobs)));
end

cfg=[];
mne_decode_results=ft_timelockanalysis([],ft_preproc_struc);

mne_decode_results=rmfield(mne_decode_results, 'var');
mne_decode_results.time=mne_decode_results.time;
mne_decode_results.avg=nparray2mat(mne_decode_results.data);
mne_decode_results=ft_combineplanar([], mne_decode_results); 

